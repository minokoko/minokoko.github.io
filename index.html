<!doctype html>



  


<html class="theme-next muse use-motion">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />












  
  
  <link href="/vendors/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/vendors/font-awesome/css/font-awesome.min.css?v=4.4.0" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.0.1" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Hexo, NexT" />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.0.1" />






<meta name="description">
<meta property="og:type" content="website">
<meta property="og:title" content="OneStack">
<meta property="og:url" content="http://jessyon.com/index.html">
<meta property="og:site_name" content="OneStack">
<meta property="og:description">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="OneStack">
<meta name="twitter:description">



<script type="text/javascript" id="hexo.configuration">
  var NexT = window.NexT || {};
  var CONFIG = {
    scheme: 'Muse',
    sidebar: {"position":"left","display":"post"},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: 0,
      author: '博主'
    }
  };
</script>




  <link rel="canonical" href="http://jessyon.com/"/>

  <title> OneStack </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  










  
  
    
  

  <div class="container one-collumn sidebar-position-left 
   page-home 
 ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">OneStack</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
  <p class="site-subtitle">The Blog Powered By jessyon</p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      

      
    </ul>
  

  
</nav>

 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/09/16/服务器搭建-三-fastDFS图片服务器/" itemprop="url">
                  服务器搭建(三) fastDFS图片服务器
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-09-16T09:02:42+08:00" content="2016-09-16">
              2016-09-16
            </time>
          </span>

          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/09/16/服务器搭建-三-fastDFS图片服务器/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/09/16/服务器搭建-三-fastDFS图片服务器/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="fastDFS搭建"><a href="#fastDFS搭建" class="headerlink" title="fastDFS搭建"></a><strong>fastDFS搭建</strong></h1><p>第一步：把fastDFS都上传到linux系统。<br>第二步：安装FastDFS之前，先安装libevent工具包。<br>yum -y install libevent<br>第三步：安装libfastcommonV1.0.7工具包。<br>    1、解压缩<br>    2、./make.sh<br>    3、./make.sh install<br>    4、把/usr/lib64/libfastcommon.so文件向/usr/lib/下复制一份<br>第四步：安装Tracker服务。<br>    1、解压缩fastDFS<br>    2、./make.sh<br>    3、./make.sh install<br>    安装后在/usr/bin/目录下有以fdfs开头的文件都是编译出来的。<br>    配置文件都放到/etc/fdfs文件夹<br>    4、把/root/FastDFS/conf目录下的所有的配置文件都复制到/etc/fdfs下。<br>       cp *<br>    5、配置tracker服务。修改/root/FastDFS/conf/tracker.conf文件。</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/09/15/服务器搭建-二-Nginx和fastDFS配置/" itemprop="url">
                  服务器搭建(二)Nginx和fastDFS配置
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-09-15T22:48:47+08:00" content="2016-09-15">
              2016-09-15
            </time>
          </span>

          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/09/15/服务器搭建-二-Nginx和fastDFS配置/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/09/15/服务器搭建-二-Nginx和fastDFS配置/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="Nginx反向代理"><a href="#Nginx反向代理" class="headerlink" title="Nginx反向代理"></a><strong>Nginx反向代理</strong></h1><p>Nginx的配置文件：</p>
<pre><code>upstream tomcats{
   server 192.168.25.148:8080;  //配置多个tomcat
   server 192.168.25.148:8081;
  }

  server {
       listen       80;
       server_name  tomcat.taotao.com;

       #charset koi8-r;

       #access_log  logs/host.access.log  main;

       location / {
           proxy_pass   http://tomcats;  //设置代理
           index  index.html index.htm;
       }
  }
</code></pre><h1 id="Nginx负载均衡"><a href="#Nginx负载均衡" class="headerlink" title="Nginx负载均衡"></a><strong>Nginx负载均衡</strong></h1><p>只需要在upstream的server后面添加一个weight即可代表权重。权重越高，分配请求的数量(概率)就越多。默认权重是1</p>
<pre><code>upstream tomcats{
        server 192.168.25.148:8080 weight=2;  //设置权重为2
        server 192.168.25.148:8081;
       }

       server {
            listen       80;
            server_name  tomcat.taotao.com;

            #charset koi8-r;

            #access_log  logs/host.access.log  main;

            location / {
                proxy_pass   http://tomcats;  //设置代理
                index  index.html index.htm;
            }
       }
</code></pre><h1 id="fastDFS"><a href="#fastDFS" class="headerlink" title="fastDFS"></a><strong>fastDFS</strong></h1><p>FastDFS是用c语言编写的一款开源的分布式文件系统。FastDFS为互联网量身定制，充分考虑了冗余备份、负载均衡、线性扩容等机制，并注重高可用、高性能等指标，使用FastDFS很容易搭建一套高性能的文件服务器集群提供文件上传、下载等服务。</p>
<h2 id="fastDFS上传流程"><a href="#fastDFS上传流程" class="headerlink" title="fastDFS上传流程"></a>fastDFS上传流程</h2><p><img src="https://raw.githubusercontent.com/minokoko/minokoko.github.io/master/images/upload.jpg" alt=""></p>
<h2 id="fastDFS下载流程"><a href="#fastDFS下载流程" class="headerlink" title="fastDFS下载流程"></a>fastDFS下载流程</h2><p><img src="https://raw.githubusercontent.com/minokoko/minokoko.github.io/master/images/download.jpg" alt=""></p>
<p>客户端上传文件后存储服务器将文件ID返回给客户端，此文件ID用于以后访问该文件的索引信息。文件索引信息包括：组名，虚拟磁盘路径，数据两级目录，文件名。</p>
<pre><code>http://192.168.233.128/group1/M00/00/00/wKjpgFfGRCqAHIo6AADW-NO57MA805.jpg

组名：文件上传后所在的storage组名称，在文件上传成功后有storage服务器返回，需要客户端自行保存。 
虚拟磁盘路径：storage配置的虚拟路径，与磁盘选项store_path*对应。如果配置了store_path0则是M00，如果配置了store_path1则是M01，以此类推。
数据两级目录：storage服务器在每个虚拟磁盘路径下创建的两级目录，用于存储数据文件。
文件名：与文件上传时不同。是由存储服务器根据特定信息生成，文件名包含：源存储服务器IP地址、文件创建时间戳、文件大小、随机数和文件拓展名等信息。
</code></pre>
          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/09/15/服务器搭建-一-jdk和nginx配置/" itemprop="url">
                  服务器搭建(一)jdk和nginx配置
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-09-15T20:39:25+08:00" content="2016-09-15">
              2016-09-15
            </time>
          </span>

          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/09/15/服务器搭建-一-jdk和nginx配置/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/09/15/服务器搭建-一-jdk和nginx配置/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="使用SecureCRT连接服务器"><a href="#使用SecureCRT连接服务器" class="headerlink" title="使用SecureCRT连接服务器"></a><strong>使用SecureCRT连接服务器</strong></h1><p>1.点击new session新建连接，选择SSH2<br>2.hostname填服务器的地址，Port填22,SecureFX选择SFTP</p>
<h1 id="安装JDK"><a href="#安装JDK" class="headerlink" title="安装JDK"></a><strong>安装JDK</strong></h1><p>1.通过Connect SFTP Session将jdk上传至服务器<br>2.使用命令tar -zxvf jdk-7u55-linux-i586.tar.gz解压压缩包<br>3.将解压后的文件移到/usr/local下 mv jdk1.7.0_55 /usr/local<br>4.cd /usr/local 查看文件是否存在<br>5.通过notepad++连接服务器,找到/etc/profile编辑<br>6.加入内容如下：<br>export JAVA_HOME=/usr/local/jdk1.7.0_55<br>export CLASSPATH=.:$JAVA_HOME/lib/dt.jar:$JAVA_HOME/lib/tools.jar<br>export PATH=$JAVA_HOME/bin:$PATH<br>7.加载刚设置的变量 source /etc/profile<br>8.java -version 查看是否成功安装jdk</p>
<h1 id="nginx安装"><a href="#nginx安装" class="headerlink" title="nginx安装"></a><strong>nginx安装</strong></h1><p>nginx是一个使用c语言开发的高性能的http服务器及反向代理服务器。<br>Nginx是一款高性能的http 服务器/反向代理服务器及电子邮件（IMAP/POP3）代理服务器。由俄罗斯的程序设计师Igor Sysoev所开发，官方测试nginx能够支支撑5万并发链接，并且cpu、内存等资源消耗却非常低，运行非常稳定。</p>
<ol>
<li>gcc<br>安装nginx需要先将官网下载的源码进行编译，编译依赖gcc环境，如果没有gcc环境，需要安装gcc：yum install gcc-c++ </li>
<li>PCRE<br>PCRE(Perl Compatible Regular Expressions)是一个Perl库，包括 perl 兼容的正则表达式库。nginx的http模块使用pcre来解析正则表达式，所以需要在linux上安装pcre库。<br>yum install -y pcre pcre-devel<br>注：pcre-devel是使用pcre开发的一个二次开发库。nginx也需要此库。</li>
<li><p>zlib<br>zlib库提供了很多种压缩和解压缩的方式，nginx使用zlib对http包的内容进行gzip，所以需要在linux上安装zlib库。<br>yum install -y zlib zlib-devel</p>
</li>
<li><p>openssl<br>OpenSSL 是一个强大的安全套接字层密码库，囊括主要的密码算法、常用的密钥和证书封装管理功能及SSL协议，并提供丰富的应用程序供测试或其它目的使用。<br>nginx不仅支持http协议，还支持https（即在ssl协议上传输http），所以需要在linux安装openssl库。<br>yum install -y openssl openssl-devel</p>
</li>
<li>将nginx-1.8.0.tar.gz拷贝至linux服务器</li>
<li>解压 tar -zxvf nginx-1.8.0.tar.gz</li>
<li>移到/usr/local mv nginx-1.8.0 /usr/local</li>
<li><p>进入nginx目录,参数设置如下：<br>./configure \<br>–prefix=/usr/local/nginx \<br>–pid-path=/var/run/nginx/nginx.pid \<br>–lock-path=/var/lock/nginx.lock \<br>–error-log-path=/var/log/nginx/error.log \<br>–http-log-path=/var/log/nginx/access.log \<br>–with-http_gzip_static_module \<br>–http-client-body-temp-path=/var/temp/nginx/client \<br>–http-proxy-temp-path=/var/temp/nginx/proxy \<br>–http-fastcgi-temp-path=/var/temp/nginx/fastcgi \<br>–http-uwsgi-temp-path=/var/temp/nginx/uwsgi \<br>–http-scgi-temp-path=/var/temp/nginx/scgi</p>
<p>注意：上边将临时文件目录指定为/var/temp/nginx，需要在/var下创建temp及nginx目录cd /var -&gt; mkdir temp -&gt; cd temp -&gt; mkdir nginx</p>
</li>
<li>在nginx目录,编译make，安装make install,安装在了/usr/local/nginx目录下</li>
<li>启动：进入nginx的sbin目录，./nginx就可以启动。关闭:./nginx -s stop<br>ps aux|grep nginx 查看nginx进程</li>
</ol>
<h1 id="nginx配置"><a href="#nginx配置" class="headerlink" title="nginx配置"></a><strong>nginx配置</strong></h1><p>在/usr/local/nginx/conf目录下nginx.conf文件是nginx的配置文件。<br>在nginx.conf文件中添加一个Service节点，修改端口号就可以</p>
<pre><code>server {                        //一个server是一个虚拟主机
        listen       80;        //当前虚拟主机监听的端口号
        server_name  localhost; //当前虚拟主机的名称

        #charset koi8-r;

        #access_log  logs/host.access.log  main;

        location / {
            root   html;     //虚拟主机的根目录
            index  index.html index.htm; //欢迎页,顺序查找
        }
   }
</code></pre>
          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/08/21/淘淘商城开发记录-三/" itemprop="url">
                  淘淘商城开发记录(三)
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-08-21T20:39:49+08:00" content="2016-08-21">
              2016-08-21
            </time>
          </span>

          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/08/21/淘淘商城开发记录-三/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/08/21/淘淘商城开发记录-三/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="综述"><a href="#综述" class="headerlink" title="综述"></a><strong>综述</strong></h1><p>昨天没有什么写太多的代码，github也都没有更新，因为一直在linux搞nginx和图片服务器的东西。</p>
<p>今天也没有写太多的代码，但是还是更新了下github，两天不更新，感觉是不是有点懒惰。</p>
<p>因为要把图片上传到服务器，而tomcat用来做静态资源服务器难免大材小用了，所以学习了nginx服务器，以及fastdfs插件。</p>
<p>在linux下操作还是有些不熟悉，还得自己搭建一个服务器，的确头有点头大。稍微总结了下用到的命令:</p>
<ul>
<li>mkdir 创建新文件夹</li>
<li>cd 返回上层目录 cd /usr/localhost/ 进入usr下的localhost目录</li>
<li>rm -rf  a/  强制删除目录a</li>
<li>ll 显示当前目录所有文件</li>
<li>cp /a/b/c  d/e/f  将a/b 目录下的c文件复制到d/e/f目录下</li>
<li>pwd 显示当前目录全路经</li>
<li>ifconfig 相当于ipconfig在windows下的效果,查看网关，ip等信息</li>
<li>tar -zxf nginx-1.8.0.tar.gz 解压nginx-1.8.0.tar.gz到当前目录</li>
</ul>
<p>在windows下经常使用SecureCRT连接到linux下，同样可以操作服务器,同时配合notpad++连接到linux操作文档，双管齐下，效率高涨。</p>
<p>nginx可以反向代理，用户访问域名，nginx服务器决定用户访问不同的应用服务器，这样可以减轻一个服务器的压力。</p>
<p>负载均衡决定了几个不同服务器负载权重，nginx服务器决定用户访问的是哪个应用服务器。根据不同的权重，nginx服务器决定权重大的应用服务器承受更多的用户访问。</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/08/19/淘淘商城开发记录-二/" itemprop="url">
                  淘淘商城开发记录(二)
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-08-19T21:49:14+08:00" content="2016-08-19">
              2016-08-19
            </time>
          </span>

          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/08/19/淘淘商城开发记录-二/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/08/19/淘淘商城开发记录-二/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="前述"><a href="#前述" class="headerlink" title="前述"></a><strong>前述</strong></h1><p>昨天完成了环境和框架的搭建，万里长征迈出了第一步，是一个完美的开始。今天完成了后台主页的展示，理解了从前端发送ajax的Restful风格的请求。将请求发送给springMVC，通过RequestMapping找到请求的页面，再返回到前端，渲染到页面。</p>
<h1 id="分页查询"><a href="#分页查询" class="headerlink" title="分页查询"></a><strong>分页查询</strong></h1><p>然后是数据的部分，无论是什么系统，都离不开CRUD，所以从最简单的查询开始。但是有一点不同的是，我使用了mybatis分页的插件pageHelper。插件的使用帮助我们大大减少了开发的难度。但是这次后台使用的是EasyUI来展示页面，相比于boostrap的插件Data Tables强大的分页和查询功能来说，自己利用插件分页和查询还是有些复杂。</p>
<h1 id="EasyUI异步树控件"><a href="#EasyUI异步树控件" class="headerlink" title="EasyUI异步树控件"></a><strong>EasyUI异步树控件</strong></h1><p>无论EasyUI在表格数据上表现如何，它在树形数据展示上还是比较可靠的。树控件内建异步加载模式的支持，用户先创建一个空的树，然后指定一个服务器端，执行检索后动态返回JSON数据来填充树并完成异步请求。EasyUITreeNode只需要三个关键属性，id，text，state。state有两个值，closed表示有子节点，ajax将会再发送请求直到返回的节点的state为open ,open的时候代表这个节点是叶子节点，将不再发送ajax请求。</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/08/18/淘淘商城开发记录-一/" itemprop="url">
                  淘淘商城开发记录(一)
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-08-18T19:25:03+08:00" content="2016-08-18">
              2016-08-18
            </time>
          </span>

          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/08/18/淘淘商城开发记录-一/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/08/18/淘淘商城开发记录-一/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="前述"><a href="#前述" class="headerlink" title="前述"></a><strong>前述</strong></h1><p>  学习javaEE已经有半年多了吧，但是还没有正式用所学的内容开发一个比较完整的项目。所以就照着网上的视频边学边做这个淘淘商城这个网站，这次的目标是熟悉JavaWeb开发的全流程，包括代码，项目架构，代码托管等。<br>  第一天熟悉了项目的技术架构，功能架构，完成了基础功能模块的搭建，并且掌握了将代码托管到github，总之这是一件很令人兴奋的事情。因为之前很久我都不太熟悉github，不知道怎么用，更不知道为何要用。在使用过SVN后，才知道版本控制，之后才知道github的强大并喜欢上了他。</p>
<h1 id="环境搭建"><a href="#环境搭建" class="headerlink" title="环境搭建"></a><strong>环境搭建</strong></h1><p>我是在eclipse下开发的淘淘商城，我之前使用的eclipse版本没有自带maven，所以刚开始找插件就令我非常头痛，因为插件的site很早就没有更新了。后来索性下载了最新版的eclipse，果然有惊喜，原来eclipse mars就已经自带了maven，非常棒。<br>我建立了一个聚合工程，在这个聚合工程中，我又分别创建了dao层，service层，web层。这样的分层结构让我的开发很有节奏感，知道到了哪一步该做什么，有条不紊。所以上手搭建SSM框架也是很快速的事情，而且很快就跑通了第一个测试，nice。</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/08/16/AccountManage开发记录/" itemprop="url">
                  AccountManage开发记录
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-08-16T20:58:12+08:00" content="2016-08-16">
              2016-08-16
            </time>
          </span>

          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/08/16/AccountManage开发记录/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/08/16/AccountManage开发记录/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="整体概况"><a href="#整体概况" class="headerlink" title="整体概况"></a>整体概况</h1><p>  完成这个面试题前前后后用了10天，因为期间也在准备另外一个实习的面试。加上指定的技术栈我不是特别熟悉，所以花费了比较多的时间来学习，但是依然只完成了指定功能的80%左右。<br>  第一天就遇到了很大的麻烦，由于spring-boot-starter-parent版本不是用的最新版，一直启动不了main。后来又遇到了json数据传输的问题，不知道spring-boot怎样处理json数据。<br>  后来又遇到了包扫描的坑，之前没有在注入的bean之前加上@Component标签，造成bean没有注入，main无法启动等一系列问题。</p>
<h2 id="关于maven生成的jar包的说明"><a href="#关于maven生成的jar包的说明" class="headerlink" title="关于maven生成的jar包的说明"></a>关于maven生成的jar包的说明</h2><p>  在AccountManage-0.0.1-SNAPSHOT.jar所在的位置启动命令行，输入<br>  java -jar AccountManage-0.0.1-SNAPSHOT.jar<br>  可启动内置的tomcat服务器，在浏览器输入<br><a href="http://localhost:8080/findAll" target="_blank" rel="external">http://localhost:8080/findAll</a><br>就可以出现以下界面,我使用的是本地mysql数据库,所以访问数据可能会有点问题。</p>
<p><img src="https://raw.githubusercontent.com/minokoko/minokoko.github.io/master/img/AccountManage.jpg" alt=""></p>
<h1 id="核心代码"><a href="#核心代码" class="headerlink" title="核心代码"></a>核心代码</h1><pre><code class="bash">    @SpringBootApplication
    @Controller
    public class Application {

    @Autowired(required=<span class="literal">true</span>) 
    private AccountManageService accountManageService;

    // freemarker
    @RequestMapping(<span class="string">"/hello"</span>)
    public String web(Map&lt;String, Object&gt; model) {
        model.put(<span class="string">"time"</span>, new Date());
        <span class="built_in">return</span> <span class="string">"hello"</span>;// 返回的内容就是templetes下面文件的名称
    }

    //
    @RequestMapping(value = <span class="string">"/update"</span>, method = RequestMethod.POST)
    @ResponseBody
    public void update(@RequestBody AccountManage account) {
        accountManageService.update(account);
    }

    @RequestMapping(value = <span class="string">"/add"</span>, method = RequestMethod.POST)
    @ResponseBody
    public void add(@RequestBody AccountManage account) {
        System.out.println(account);
        accountManageService.add(account);
    }

    @RequestMapping(value = <span class="string">"/delete"</span>, method = RequestMethod.POST)
    @ResponseBody
    public void delete(@RequestBody AccountManage account) {
        accountManageService.deletById(account.getId());
    }

    @RequestMapping(<span class="string">"/findAll"</span>)
    public String findAll(@ModelAttribute(<span class="string">"model"</span>) ModelMap model) {
        List&lt;AccountManage&gt; list = accountManageService.findAll();
        model.addAttribute(<span class="string">"infos"</span>, list);
        model.addAttribute(<span class="string">"time"</span>, new Date().toLocaleString());
        System.out.println(new Date().toLocaleString());
        <span class="built_in">return</span> <span class="string">"hello"</span>;
    }

    public static void main(String[] args) {
        SpringApplication.run(Application.class, args);
    }
}


Dao层

    @Component
    @Repository
    public class AccountManageDaoImpl implements AccountManageDao{
        @Autowired
        private JdbcTemplate jdbcTemplate;

        public List&lt;AccountManage&gt; <span class="function"><span class="title">findAll</span></span>() {
            String sql = <span class="string">"select * from info"</span>;
            <span class="built_in">return</span> (List&lt;AccountManage&gt;) jdbcTemplate.query(sql, new RowMapper&lt;AccountManage&gt;() {

                public AccountManage mapRow(ResultSet rs, int rowNum) throws SQLException {
                    AccountManage accountManage = new AccountManage();
                    accountManage.setCountType(rs.getString(<span class="string">"count_type"</span>));
                    accountManage.setCreateTime(rs.getString(<span class="string">"create_time"</span>));
                    accountManage.setId(rs.getString(<span class="string">"id"</span>));
                    accountManage.setLastTime(rs.getString(<span class="string">"last_time"</span>));
                    accountManage.setName(rs.getString(<span class="string">"name"</span>));
                    accountManage.setStatus(rs.getString(<span class="string">"status"</span>));
                    accountManage.setRemark(rs.getString(<span class="string">"remark"</span>));
                    System.out.println(accountManage.toString());
                    <span class="built_in">return</span> accountManage;
                }
            });
        }

        public void add(AccountManage account) {
            jdbcTemplate.update(
                    <span class="string">"insert into info(id,name,create_time,status,count_type,last_time,remark ) values(?,?,?,?,?,?,?)"</span>,
                    account.getId(), account.getName(), account.getCreateTime(), account.getStatus(),
                    account.getCountType(), account.getLastTime(), account.getRemark());
        }

        public void deleteById(String id) {
            jdbcTemplate.update(<span class="string">"delete from info where id = ?"</span>, id);
        }

        @Override
        public void update(AccountManage account) {
            jdbcTemplate.update(
                    <span class="string">"update  info(name,create_time,status,count_type,last_time,remark ) values(?,?,?,?,?,?) where id=?"</span>,
                     account.getName(), account.getCreateTime(), account.getStatus(),
                    account.getCountType(), account.getLastTime(), account.getRemark(),account.getId());
        }
    }
</code></pre>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/06/01/我是如何整合SSH的-三-CRM总结/" itemprop="url">
                  我是如何整合SSH的(三)CRM总结
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-06-01T21:18:29+08:00" content="2016-06-01">
              2016-06-01
            </time>
          </span>

          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/06/01/我是如何整合SSH的-三-CRM总结/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/06/01/我是如何整合SSH的-三-CRM总结/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="前述"><a href="#前述" class="headerlink" title="前述"></a>前述</h1><p>这个周一直在逐步地完成临摹一个CRM系统的工作，并且每一小版本的工作都通过SVN记录下来。这个周初步了解学习了linux系统，选用的版本是Centos6.5，并且学会了搭建JavaEE所需要的环境，包括Tomcat7、jdk1.7、eclise，svn等基本环境。还学会了如何通过SSH远程登录服务器，如何在windows和linux之间交换数据。</p>
<h1 id="小项目-CRM"><a href="#小项目-CRM" class="headerlink" title="小项目:CRM"></a>小项目:CRM</h1><h2 id="练习步骤"><a href="#练习步骤" class="headerlink" title="练习步骤"></a>练习步骤</h2><p>1.确定需求<br>1.1登录 （基本流程、登录拦截器、校验）<br>1.2员工管理</p>
<ul>
<li>查询所有</li>
<li>添加（ajax级联）</li>
<li>更新（标签回显）</li>
<li>条件查询<br>1.3课程类别</li>
<li>查询所有（条件 + 分页）</li>
<li>添加或更新<br><img src="https://raw.githubusercontent.com/minokoko/minokoko.github.io/master/img/CRM.jpg" alt=""></li>
</ul>
<p>2.根据需求创建ER图，并在数据库中添加数据<br><img src="https://raw.githubusercontent.com/minokoko/minokoko.github.io/master/img/CRM-ER.jpg" alt=""></p>
<p>3.在Eclips中创建CRM项目，并且将项目添加SVN版本控制器。<br><img src="https://raw.githubusercontent.com/minokoko/minokoko.github.io/master/img/CRM-SVN.JPG" alt=""></p>
<p>4.添加Spring、Hibernate、struts2等相关的jar包</p>
<p>5.对应ER图，创建相应的JavaBean，并且为相应的Bean添加hibernate配置文件。</p>
<pre><code>&lt;hibernate-mapping&gt;
&lt;class name=&quot;com.jessyon.crm.classes.domain.CrmClass&quot; table=&quot;crm_class&quot;&gt;
    &lt;id name=&quot;classId&quot;&gt;
        &lt;generator class=&quot;uuid&quot;&gt;&lt;/generator&gt;
    &lt;/id&gt;

    &lt;property name=&quot;name&quot;&gt;&lt;/property&gt;
    &lt;property name=&quot;beginTime&quot;&gt;
        &lt;column name=&quot;beginTime&quot; sql-type=&quot;datetime&quot;&gt;&lt;/column&gt;
    &lt;/property&gt;
    &lt;property name=&quot;endTime&quot;&gt;
        &lt;column name=&quot;endTime&quot; sql-type=&quot;datetime&quot;&gt;&lt;/column&gt;
    &lt;/property&gt;

    &lt;property name=&quot;status&quot;&gt;&lt;/property&gt;
    &lt;property name=&quot;totalCount&quot;&gt;&lt;/property&gt;
    &lt;property name=&quot;upgradeCount&quot;&gt;&lt;/property&gt;
    &lt;property name=&quot;changeCount&quot;&gt;&lt;/property&gt;

    &lt;property name=&quot;runoffCount&quot;&gt;&lt;/property&gt;
    &lt;property name=&quot;remark&quot;&gt;&lt;/property&gt;
    &lt;property name=&quot;uploadTime&quot;&gt;
        &lt;column name=&quot;uploadTime&quot; sql-type=&quot;datetime&quot;&gt;&lt;/column&gt;
    &lt;/property&gt;

    &lt;property name=&quot;uploadPath&quot;&gt;&lt;/property&gt;
    &lt;property name=&quot;uploadFilename&quot;&gt;&lt;/property&gt;

    &lt;many-to-one name=&quot;courseType&quot; class=&quot;com.jessyon.crm.coursetype.domain.CrmCourseType&quot; column=&quot;courseTypeId&quot;&gt;&lt;/many-to-one&gt;
&lt;/class&gt;
&lt;/hibernate-mapping&gt;
</code></pre><p>6.配置spring</p>
<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;
   xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
   xmlns:aop=&quot;http://www.springframework.org/schema/aop&quot;
   xmlns:tx=&quot;http://www.springframework.org/schema/tx&quot;
   xmlns:context=&quot;http://www.springframework.org/schema/context&quot;
   xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans 
                          http://www.springframework.org/schema/beans/spring-beans.xsd
                          http://www.springframework.org/schema/tx 
                          http://www.springframework.org/schema/tx/spring-tx.xsd
                          http://www.springframework.org/schema/aop 
                          http://www.springframework.org/schema/aop/spring-aop.xsd
                          http://www.springframework.org/schema/context 
                          http://www.springframework.org/schema/context/spring-context.xsd&quot;&gt;

&lt;!-- 配置公共项 --&gt;
&lt;!-- 1 加载properties文件 --&gt;
&lt;context:property-placeholder location=&quot;classpath:jdbcInfo.properties&quot;/&gt;

&lt;!-- 2 配置数据源 --&gt;
&lt;bean id=&quot;dataSource&quot; class=&quot;com.mchange.v2.c3p0.ComboPooledDataSource&quot;&gt;
    &lt;property name=&quot;driverClass&quot; value=&quot;${jdbc.driverClass}&quot;&gt;&lt;/property&gt;
    &lt;property name=&quot;jdbcUrl&quot; value=&quot;${jdbc.jdbcUrl}&quot;&gt;&lt;/property&gt;
    &lt;property name=&quot;user&quot; value=&quot;${jdbc.user}&quot;&gt;&lt;/property&gt;
    &lt;property name=&quot;password&quot; value=&quot;${jdbc.password}&quot;&gt;&lt;/property&gt;
&lt;/bean&gt;

&lt;!-- 3 session工厂 --&gt;
&lt;bean id=&quot;sessionFactory&quot; class=&quot;org.springframework.orm.hibernate3.LocalSessionFactoryBean&quot;&gt;
    &lt;property name=&quot;dataSource&quot; ref=&quot;dataSource&quot;&gt;&lt;/property&gt;
    &lt;property name=&quot;hibernateProperties&quot;&gt;
        &lt;props&gt;
            &lt;prop key=&quot;hibernate.dialect&quot;&gt;org.hibernate.dialect.MySQL5Dialect&lt;/prop&gt;
            &lt;prop key=&quot;hibernate.show_sql&quot;&gt;true&lt;/prop&gt;
            &lt;prop key=&quot;hibernate.format_sql&quot;&gt;true&lt;/prop&gt;
            &lt;prop key=&quot;hibernate.current_session_context_class&quot;&gt;thread&lt;/prop&gt;
            &lt;prop key=&quot;javax.persistence.validation.mode&quot;&gt;none&lt;/prop&gt;
        &lt;/props&gt;
    &lt;/property&gt;
    &lt;property name=&quot;mappingLocations&quot; value=&quot;classpath:com/jessyon/crm/*/domain/*.hbx.xml&quot;&gt;&lt;/property&gt;
</code></pre><p>   </p>
<pre><code>&lt;!-- 4 事务管理 --&gt;
&lt;!-- 4.1 事务管理器 --&gt;
&lt;bean id=&quot;txManager&quot; class=&quot;org.springframework.orm.hibernate3.HibernateTransactionManager&quot;&gt;
    &lt;property name=&quot;sessionFactory&quot; ref=&quot;sessionFactory&quot;&gt;&lt;/property&gt;
&lt;/bean&gt;
&lt;!-- 4.2 事务详情  --&gt;
&lt;tx:advice id=&quot;txAdvice&quot; transaction-manager=&quot;txManager&quot;&gt;
    &lt;tx:attributes&gt;
        &lt;tx:method name=&quot;add*&quot;/&gt;
        &lt;tx:method name=&quot;save*&quot;/&gt;
        &lt;tx:method name=&quot;update*&quot;/&gt;
        &lt;tx:method name=&quot;delete*&quot;/&gt;
        &lt;tx:method name=&quot;find*&quot; read-only=&quot;true&quot;/&gt;
        &lt;tx:method name=&quot;*&quot; read-only=&quot;true&quot;/&gt;
    &lt;/tx:attributes&gt;
&lt;/tx:advice&gt;
&lt;!-- 4.3 aop编程  
--&gt;
&lt;aop:config proxy-target-class=&quot;true&quot;&gt;
    &lt;aop:advisor advice-ref=&quot;txAdvice&quot; pointcut=&quot;execution(* com.jessyon.crm.*.service..*.*(..))&quot;/&gt;
&lt;/aop:config&gt;


&lt;!-- 包含其他子模块 --&gt;
&lt;!-- 员工 ,部门, 职务--&gt;
&lt;!-- &lt;import resource=&quot;applicationContext-staff.xml&quot;/&gt;
&lt;import resource=&quot;applicationContext-department.xml&quot;/&gt;
&lt;import resource=&quot;applicationContext-post.xml&quot;/&gt;
&lt;import resource=&quot;applicationContext-coursetype.xml&quot;/&gt; --&gt;
&lt;/beans&gt;
</code></pre><p><strong> applicationContext-courseType.xml<br>其他的相关的配置文件，比如department、post、staff的配置文件都是以下格式</strong></p>
<pre><code>    &lt;bean id=&quot;courseTypeDao&quot; class=&quot;com.jessyon.crm.coursetype.dao.impl.CourseTypeDaoImpl&quot;&gt;
    &lt;property name=&quot;sessionFactory&quot; ref=&quot;sessionFactory&quot;&gt;&lt;/property&gt;
&lt;/bean&gt;
&lt;!-- service --&gt;
&lt;bean id=&quot;courseTypeService&quot; class=&quot;com.jessyon.crm.coursetype.service.impl.CourseTypeServiceImpl&quot;&gt;
    &lt;property name=&quot;courseTypeDao&quot; ref=&quot;courseTypeDao&quot;&gt;&lt;/property&gt;
&lt;/bean&gt;
</code></pre><p>7.配置struts2</p>
<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;!DOCTYPE struts PUBLIC
&quot;-//Apache Software Foundation//DTD Struts Configuration 2.3//EN&quot;
&quot;http://struts.apache.org/dtds/struts-2.3.dtd&quot;&gt;
&lt;struts&gt;
&lt;!-- 常量 --&gt;
&lt;constant name=&quot;struts.devMode&quot; value=&quot;true&quot;&gt;&lt;/constant&gt;
&lt;constant name=&quot;struts.ui.theme&quot; value=&quot;simple&quot;&gt;&lt;/constant&gt;

&lt;!-- 公共项 其他子模块都会继承common --&gt;
&lt;package name=&quot;common&quot; namespace=&quot;/&quot; extends=&quot;struts-default&quot;&gt;
    &lt;!-- 配置拦截器 --&gt;
    &lt;interceptors&gt;
        &lt;interceptor name=&quot;loginInterceptor&quot; class=&quot;com.jessyon.crm.web.interceptor.LoginInterceptor&quot;&gt;&lt;/interceptor&gt;
        &lt;interceptor-stack name=&quot;loginStack&quot;&gt;
            &lt;interceptor-ref name=&quot;defaultStack&quot;&gt;&lt;/interceptor-ref&gt;
            &lt;interceptor-ref name=&quot;loginInterceptor&quot;&gt;
                &lt;!-- 不需要拦截的方法,多个方法逗号隔开 --&gt;
                &lt;param name=&quot;excludeMethods&quot;&gt;login&lt;/param&gt;
            &lt;/interceptor-ref&gt;
        &lt;/interceptor-stack&gt;
    &lt;/interceptors&gt;
    &lt;!-- &lt;default-interceptor-ref name=&quot;loginStack&quot;&gt;&lt;/default-interceptor-ref&gt; --&gt;
    &lt;global-results&gt;
        &lt;result name=&quot;login&quot;&gt;/WEB-INF/pages/login.jsp&lt;/result&gt;
    &lt;/global-results&gt;
    &lt;action name=&quot;uiAction_*_*&quot;&gt;

            &lt;result&gt;/WEB-INF/pages/{1}/{2}.jsp&lt;/result&gt;
    &lt;/action&gt;
&lt;/package&gt;

&lt;!-- 包含其他子模块 --&gt;
&lt;include file=&quot;struts/struts-staff.xml&quot;&gt;&lt;/include&gt;
&lt;include file=&quot;struts/struts-post.xml&quot;&gt;&lt;/include&gt;
&lt;include file=&quot;struts/struts-department.xml&quot;&gt;&lt;/include&gt;
&lt;include file=&quot;struts/struts-coursetype.xml&quot;&gt;&lt;/include&gt;
&lt;/struts&gt;
</code></pre><p><strong> struts2-courseType.xml<br>其他的相关的配置文件，比如department、post、staff的配置文件都是以下格式</strong></p>
<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;!DOCTYPE struts PUBLIC
&quot;-//Apache Software Foundation//DTD Struts Configuration 2.3//EN&quot;
&quot;http://struts.apache.org/dtds/struts-2.3.dtd&quot;&gt;
struts&gt;
&lt;package name=&quot;coursetype&quot; namespace=&quot;/&quot; extends=&quot;common&quot;&gt;
    &lt;action name=&quot;courseTypeAction_*&quot; class=&quot;com.jessyon.crm.coursetype.web.action.CourseTypeAction&quot; method=&quot;{1}&quot;&gt;
        &lt;result name=&quot;findAll&quot;&gt;/WEB-INF/pages/coursetype/listCourse.jsp&lt;/result&gt;
        &lt;result name=&quot;saveOrUpdateUI&quot;&gt;/WEB-INF/pages/coursetype/addOrEditCourse.jsp&lt;/result&gt;
        &lt;result name=&quot;saveOrUpdate&quot; type=&quot;redirectAction&quot;&gt;
            &lt;param name=&quot;namespace&quot;&gt;/&lt;/param&gt;
            &lt;param name=&quot;actionName&quot;&gt;courseTypeAction_findAll&lt;/param&gt;
        &lt;/result&gt;
    &lt;/action&gt;
&lt;/package&gt;
&lt;/struts&gt;
</code></pre><p>8.配置web.xml</p>
<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;web-app xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns=&quot;http://java.sun.com/xml/ns/javaee&quot; xmlns:web=&quot;http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd&quot; xsi:schemaLocation=&quot;http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd&quot; id=&quot;WebApp_ID&quot; version=&quot;2.5&quot;&gt;
  &lt;display-name&gt;Mycrm&lt;/display-name&gt;
  &lt;filter&gt;
      &lt;filter-name&gt;openSession&lt;/filter-name&gt;
      &lt;filter-class&gt;org.springframework.orm.hibernate3.support.OpenSessionInViewFilter&lt;/filter-class&gt;
  &lt;/filter&gt;

  &lt;filter-mapping&gt;
      &lt;filter-name&gt;openSession&lt;/filter-name&gt;
      &lt;url-pattern&gt;/*&lt;/url-pattern&gt;
  &lt;/filter-mapping&gt;

  &lt;context-param&gt;
      &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt;
      &lt;param-value&gt;classpath:spring/applicationContext*.xml&lt;/param-value&gt;
  &lt;/context-param&gt;

  &lt;listener&gt;
      &lt;listener-class&gt;org.springframework.web.context.ContextLoaderListener&lt;/listener-class&gt;
  &lt;/listener&gt;

  &lt;filter&gt;
          &lt;filter-name&gt;struts2&lt;/filter-name&gt;
          &lt;filter-class&gt;org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter&lt;/filter-class&gt;
  &lt;/filter&gt;

  &lt;filter-mapping&gt;
          &lt;filter-name&gt;struts2&lt;/filter-name&gt;
          &lt;url-pattern&gt;/*&lt;/url-pattern&gt;
  &lt;/filter-mapping&gt;
&lt;/web-app&gt;
</code></pre>
          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/05/25/我是如何整合SSH的-二/" itemprop="url">
                  我是如何整合SSH的(二)
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-05-25T21:15:38+08:00" content="2016-05-25">
              2016-05-25
            </time>
          </span>

          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/05/25/我是如何整合SSH的-二/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/05/25/我是如何整合SSH的-二/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="前述"><a href="#前述" class="headerlink" title="前述"></a>前述</h1><p>这个周在初步了解SSH整合流程，同时以项目为驱动继续学习SSH。在网上找了一个CRM系统来临摹，同时辅助学习SVN版本控制器。因为之前并没有很多版本控制的概念，所以在接触SVN的时候，遇到了很多问题。CRM系统目前已经完成了登录功能，之后会通过CRM再熟悉SSH的CRUD。</p>
<h1 id="新知识点"><a href="#新知识点" class="headerlink" title="新知识点"></a>新知识点</h1><ul>
<li>spring配置中，可以在applicationContext.xml中通过<import resource="applicationContext-user.xml">来引入applicationContext-user.xml配置文件。</import></li>
<li>struts2配置中，指定package的name=”common”,其他struts2配置文件可以通过<package extends="common">继承包名为common下的所有内容。</package></li>
<li>struts2配置中，可以通过<include file="struts/struts-staff.xml"></include>来引入struts包下的struts-staff.xml配置文件中的所有内容。</li>
<li>MD5加密，可以通过MessageDigest messageDigest=MessageDigest.getInstance(“MD5”)初始化消息摘要算法<br>通过byte[] md5value = messageDigest.digest(value.getBytes());对String类型的字符串进行加密。<br>得到内容是10进制的，通过BigInteger bigInteger = new BigInteger(1,md5value); bigInteger.toString(16);转换成16进制。</li>
<li>SVN开启服务，打开命令行，输入svnserve -d -r f:\svn开启服务(f:\svn为仓库目录)。</li>
<li>在svnserve.conf文件的20、27、36行，将注释打开，开启svn权限配置。<br>auth-access = write<br>password-db = passwd<br>authz-db = authz 这三行前面不能有任何空格。</li>
<li>在passwd文件下添加用户 user1 = 1234 user1为用户名，1234为密码。</li>
<li>在authz文件下配置权限<br>[crm:/]       配置crm文件夹的访问权限<br>jessyon = rw  用户jessyon有读写权限<br>*=r         其他所有用户为只读权限</li>
<li>check out到本地文件，在文件夹中右键SVN checkout弹出窗口，输入svn://localhost:3690/crm便可以将服务器上的内容checkout下来。<br><img src="https://raw.githubusercontent.com/minokoko/minokoko.github.io/master/img/checkout.jpg" alt=""></li>
</ul>
<h2 id="特别注意"><a href="#特别注意" class="headerlink" title="特别注意"></a>特别注意</h2><p>在eclipse中，新建的web项目并没有jstl.jar和standard.jar这两个包，如果是myeclipse中的项目导入到eclipse中并且用到了jstl，那么需要额外导入这两个jar包。</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/05/20/我是如何整合SSH的-一/" itemprop="url">
                  我是如何整合SSH的(一)
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-05-20T23:00:31+08:00" content="2016-05-20">
              2016-05-20
            </time>
          </span>

          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/05/20/我是如何整合SSH的-一/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/05/20/我是如何整合SSH的-一/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h1><p>在之前一段时间内，我断断续续在课余时间学习了struts2、hibernate3、spring和其他javaEE的关键技术。由于之间一直呆在实验室帮老师做一个其他的项目，并没有很认真地学习javaEE，掌握的知识可能并不是很牢靠，所以通过整合SSH这个过程来提高我对JavaEE的认知。</p>
<h2 id="Spring整合Hibernate3之注册案例"><a href="#Spring整合Hibernate3之注册案例" class="headerlink" title="Spring整合Hibernate3之注册案例"></a>Spring整合Hibernate3之注册案例</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br></pre></td><td class="code"><pre><span class="line">//定义User</span><br><span class="line">	private Integer id;</span><br><span class="line">	private String username;</span><br><span class="line">	private String <span class="built_in">pwd</span>;</span><br><span class="line">	private Integer age;</span><br><span class="line">	private Date birthday;</span><br><span class="line">	</span><br><span class="line">//User.hbx.xml配置文件</span><br><span class="line">&lt;?xml version=<span class="string">"1.0"</span> encoding=<span class="string">"UTF-8"</span>?&gt;</span><br><span class="line">&lt;!DOCTYPE hibernate-mapping PUBLIC </span><br><span class="line">    <span class="string">"-//Hibernate/Hibernate Mapping DTD 3.0//EN"</span></span><br><span class="line">    <span class="string">"http://www.hibernate.org/dtd/hibernate-mapping-3.0.dtd"</span>&gt;</span><br><span class="line">&lt;hibernate-mapping&gt;</span><br><span class="line">	&lt;class name=<span class="string">"com.ssh.bean.User"</span> table=<span class="string">"user"</span>&gt;</span><br><span class="line">	  &lt;id name=<span class="string">"id"</span>&gt;</span><br><span class="line">	  	&lt;generator class=<span class="string">"native"</span>&gt;&lt;/generator&gt;</span><br><span class="line">	  &lt;/id&gt;</span><br><span class="line">	  &lt;property name=<span class="string">"username"</span>&gt;&lt;/property&gt;</span><br><span class="line">	  &lt;property name=<span class="string">"pwd"</span>&gt;&lt;/property&gt;</span><br><span class="line">	  &lt;property name=<span class="string">"age"</span>&gt;&lt;/property&gt;</span><br><span class="line">	  &lt;property name=<span class="string">"birthday"</span> <span class="built_in">type</span>=<span class="string">"date"</span>&gt;&lt;/property&gt;</span><br><span class="line">	&lt;/class&gt;</span><br><span class="line">&lt;/hibernate-mapping&gt;</span><br><span class="line"></span><br><span class="line">//UserDaoImpl ,继承自HibernateDaoSupport，可以使用hibernate的模版</span><br><span class="line">public class UserDaoImpl extends HibernateDaoSupport implements UserDao &#123;</span><br><span class="line">	public void addUser(User u) &#123;</span><br><span class="line">        this.getHibernateTemplate().save(u);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//UserService层,这一层和以前没有任何改变</span><br><span class="line">public class UserServiceImpl implements UserService &#123;</span><br><span class="line"></span><br><span class="line">	private UserDao userDao;</span><br><span class="line">	public void <span class="built_in">set</span>UserDao(UserDao userDao) &#123;</span><br><span class="line">		this.userDao = userDao;</span><br><span class="line">	&#125;</span><br><span class="line">	public void register(User u) &#123;</span><br><span class="line">        this.userDao.addUser(u);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//用注册一个用户来测试Spring是否已经整合了hibernate</span><br><span class="line">public class SSHTest &#123;</span><br><span class="line">	@Test</span><br><span class="line">	public void <span class="function"><span class="title">testAdd</span></span>()&#123;</span><br><span class="line">		User u = new User();</span><br><span class="line">		u.setUsername(<span class="string">"jessyon"</span>);</span><br><span class="line">		u.setPwd(<span class="string">"1234"</span>);</span><br><span class="line">		u.setAge(18);</span><br><span class="line">		u.setBirthday(new Date());</span><br><span class="line">		</span><br><span class="line">		String xmlPath=<span class="string">"applicationContext.xml"</span>;</span><br><span class="line">		ApplicationContext applicationContext = new ClassPathXmlApplicationContext(xmlPath);</span><br><span class="line">		UserService userService = (UserService) applicationContext.getBean(<span class="string">"userService"</span>);	</span><br><span class="line">		userService.register(u);  </span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">//和单独使用hibernate一样，需要在src下创建一个hibernate.cfg.xml配置文件</span><br><span class="line">&lt;?xml version=<span class="string">"1.0"</span> encoding=<span class="string">"UTF-8"</span>?&gt;</span><br><span class="line">&lt;!DOCTYPE hibernate-configuration PUBLIC</span><br><span class="line">	<span class="string">"-//Hibernate/Hibernate Configuration DTD 3.0//EN"</span></span><br><span class="line">	<span class="string">"http://www.hibernate.org/dtd/hibernate-configuration-3.0.dtd"</span>&gt;</span><br><span class="line"></span><br><span class="line">&lt;hibernate-configuration&gt;</span><br><span class="line">	&lt;session-factory&gt;</span><br><span class="line">		&lt;!-- 1.基本4项 --&gt;</span><br><span class="line">		&lt;property name=<span class="string">"hibernate.connection.driver_class"</span>&gt;com.mysql.jdbc.Driver&lt;/property&gt;</span><br><span class="line">		&lt;property name=<span class="string">"hibernate.connection.url"</span>&gt;jdbc:mysql:///ssh&lt;/property&gt;</span><br><span class="line">		&lt;property name=<span class="string">"hibernate.connection.username"</span>&gt;root&lt;/property&gt;</span><br><span class="line">		&lt;property name=<span class="string">"hibernate.connection.password"</span>&gt;jessyon6233834&lt;/property&gt;</span><br><span class="line">		</span><br><span class="line">		&lt;!-- 方言 --&gt;</span><br><span class="line">		&lt;property name=<span class="string">"hibernate.dialect"</span>&gt;org.hibernate.dialect.MySQL5Dialect&lt;/property&gt;</span><br><span class="line">		</span><br><span class="line">		&lt;!-- sql语句 --&gt;</span><br><span class="line">		&lt;property name=<span class="string">"hibernate.show_sql"</span>&gt;<span class="literal">true</span>&lt;/property&gt;</span><br><span class="line">		&lt;property name=<span class="string">"hibernate.format_sql"</span>&gt;<span class="literal">true</span>&lt;/property&gt;</span><br><span class="line">		</span><br><span class="line">			&lt;!-- 6 取消bean校验 --&gt;</span><br><span class="line">		&lt;property name=<span class="string">"javax.persistence.validation.mode"</span>&gt;none&lt;/property&gt;</span><br><span class="line">	</span><br><span class="line">		&lt;!-- 添加映射文件 --&gt;</span><br><span class="line">		&lt;mapping resource=<span class="string">"com/ssh/bean/User.hbm.xml"</span>/&gt;</span><br><span class="line">	&lt;/session-factory&gt;</span><br><span class="line">&lt;/hibernate-configuration&gt;	</span><br><span class="line"></span><br><span class="line">//Spring的配置都保存在applicationContext.xml里面</span><br><span class="line">&lt;?xml version=<span class="string">"1.0"</span> encoding=<span class="string">"UTF-8"</span>?&gt;</span><br><span class="line">&lt;beans xmlns=<span class="string">"http://www.springframework.org/schema/beans"</span></span><br><span class="line">       xmlns:xsi=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span><br><span class="line">       xmlns:aop=<span class="string">"http://www.springframework.org/schema/aop"</span></span><br><span class="line">       xmlns:tx=<span class="string">"http://www.springframework.org/schema/tx"</span></span><br><span class="line">       xmlns:context=<span class="string">"http://www.springframework.org/schema/context"</span></span><br><span class="line">       xsi:schemaLocation=<span class="string">"http://www.springframework.org/schema/beans </span><br><span class="line">       					   http://www.springframework.org/schema/beans/spring-beans.xsd</span><br><span class="line">       					   http://www.springframework.org/schema/tx </span><br><span class="line">       					   http://www.springframework.org/schema/tx/spring-tx.xsd</span><br><span class="line">       					   http://www.springframework.org/schema/aop </span><br><span class="line">       					   http://www.springframework.org/schema/aop/spring-aop.xsd</span><br><span class="line">       					   http://www.springframework.org/schema/context </span><br><span class="line">       					   http://www.springframework.org/schema/context/spring-context.xsd"</span>&gt;</span><br><span class="line">	&lt;!-- 1 获得session工厂</span><br><span class="line">			* 加载hibernate.cfg.xml 获得工厂</span><br><span class="line">				configLocation : 确定配置文件位置</span><br><span class="line">	--&gt;</span><br><span class="line"></span><br><span class="line">	&lt;bean id=<span class="string">"sessionFactory"</span> class=<span class="string">"org.springframework.orm.hibernate3.LocalSessionFactoryBean"</span>&gt;</span><br><span class="line">		&lt;property name=<span class="string">"configLocation"</span> value=<span class="string">"classpath:hibernate.cfg.xml"</span>&gt;&lt;/property&gt;</span><br><span class="line">	&lt;/bean&gt;</span><br><span class="line">	</span><br><span class="line">	&lt;!-- 2  模板 --&gt;</span><br><span class="line">	&lt;bean id=<span class="string">"hibernateTemplate"</span> class=<span class="string">"org.springframework.orm.hibernate3.HibernateTemplate"</span>&gt;</span><br><span class="line">		&lt;property name=<span class="string">"sessionFactory"</span> ref=<span class="string">"sessionFactory"</span>&gt;&lt;/property&gt;</span><br><span class="line">	&lt;/bean&gt;</span><br><span class="line">	</span><br><span class="line">	&lt;!-- dao UserDao类里用到了hibernateTemplate，所以需要将之注入到dao里面--&gt;</span><br><span class="line">	&lt;bean id=<span class="string">"userDao"</span> class=<span class="string">"com.ssh.daoimpl.UserDaoImpl"</span>&gt;</span><br><span class="line">		&lt;property name=<span class="string">"hibernateTemplate"</span> ref=<span class="string">"hibernateTemplate"</span>&gt;&lt;/property&gt;</span><br><span class="line">	&lt;/bean&gt;</span><br><span class="line">	</span><br><span class="line">	&lt;bean id=<span class="string">"userService"</span> class=<span class="string">"com.ssh.serviceimpl.UserServiceImpl"</span>&gt;</span><br><span class="line">		&lt;property name=<span class="string">"userDao"</span> ref=<span class="string">"userDao"</span>&gt;&lt;/property&gt;</span><br><span class="line">	&lt;/bean&gt;</span><br><span class="line">	</span><br><span class="line">	&lt;!-- 事务管理 ,需要将管理事务的session注入--&gt;</span><br><span class="line">	&lt;bean id=<span class="string">"txManager"</span> class=<span class="string">"org.springframework.orm.hibernate3.HibernateTransactionManager"</span>&gt;</span><br><span class="line">		&lt;property name=<span class="string">"sessionFactory"</span> ref=<span class="string">"sessionFactory"</span>&gt;&lt;/property&gt;</span><br><span class="line">	&lt;/bean&gt;</span><br><span class="line">	</span><br><span class="line">	&lt;tx:advice id=<span class="string">"txAdvice"</span> transaction-manager=<span class="string">"txManager"</span>&gt;</span><br><span class="line">		&lt;tx:attributes&gt;</span><br><span class="line">			&lt;tx:method name=<span class="string">"register"</span>/&gt;</span><br><span class="line">		&lt;/tx:attributes&gt;</span><br><span class="line">	&lt;/tx:advice&gt;</span><br><span class="line">	</span><br><span class="line">	&lt;!-- aop 执行service中的方法前，添加事务管理。如果不加这句话，就相当于执行了rollback,没有commit--&gt;</span><br><span class="line">	&lt;aop:config&gt;</span><br><span class="line">		&lt;aop:advisor advice-ref=<span class="string">"txAdvice"</span> pointcut=<span class="string">"execution(* com.ssh.service..*.*(..))"</span>/&gt;</span><br><span class="line">	&lt;/aop:config&gt;</span><br><span class="line">&lt;/beans&gt;</span><br><span class="line"></span><br><span class="line">//也可以不使用hibernate.cfg.xml，那么applicationContext需要微调</span><br><span class="line"></span><br><span class="line">//使用c3p0作为数据源(连接池)</span><br><span class="line">&lt;bean id=<span class="string">"dataSource"</span> class=<span class="string">"com.mchange.v2.c3p0.ComboPooledDataSource"</span>&gt;</span><br><span class="line">		&lt;property name=<span class="string">"driverClass"</span> value=<span class="string">"com.mysql.jdbc.Driver"</span>&gt;&lt;/property&gt;</span><br><span class="line">		&lt;property name=<span class="string">"jdbcUrl"</span> value=<span class="string">"jdbc:mysql:///ssh"</span>&gt;&lt;/property&gt;</span><br><span class="line">		&lt;property name=<span class="string">"user"</span> value=<span class="string">"root"</span>&gt;&lt;/property&gt;</span><br><span class="line">		&lt;property name=<span class="string">"password"</span> value=<span class="string">"jessyon6233834"</span>&gt;&lt;/property&gt;</span><br><span class="line">	&lt;/bean&gt;</span><br><span class="line">	</span><br><span class="line">	//session工厂的内容变多，不仅需要注入数据源，还要将hibernate.cfg.xml里的内容注入</span><br><span class="line">	&lt;bean id=<span class="string">"sessionFactory"</span> class=<span class="string">"org.springframework.orm.hibernate3.LocalSessionFactoryBean"</span>&gt;</span><br><span class="line">		&lt;property name=<span class="string">"dataSource"</span> ref=<span class="string">"dataSource"</span>&gt;&lt;/property&gt;</span><br><span class="line">		&lt;property name=<span class="string">"hibernateProperties"</span>&gt;</span><br><span class="line">			&lt;props&gt;</span><br><span class="line">				&lt;prop key=<span class="string">"hibernate.dialect"</span>&gt;org.hibernate.dialect.MySQL5Dialect&lt;/prop&gt;</span><br><span class="line">				&lt;prop key=<span class="string">"hibernate.show_sql"</span>&gt;<span class="literal">true</span>&lt;/prop&gt;</span><br><span class="line">				&lt;prop key=<span class="string">"hibernate.format_sql"</span>&gt;<span class="literal">true</span>&lt;/prop&gt;</span><br><span class="line">				&lt;prop key=<span class="string">"hibernate.current_session_context_class"</span>&gt;thread&lt;/prop&gt;</span><br><span class="line">				&lt;prop key=<span class="string">"javax.persistence.validation.mode"</span>&gt;none&lt;/prop&gt;</span><br><span class="line">			&lt;/props&gt;</span><br><span class="line">		&lt;/property&gt;</span><br><span class="line">		&lt;property name=<span class="string">"mappingLocations"</span> value=<span class="string">"classpath:com/ssh/bean/*.hbm.xml"</span>&gt;&lt;/property&gt;</span><br><span class="line">	&lt;/bean&gt;</span><br></pre></td></tr></table></figure>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
  </section>

  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel  sidebar-panel-active ">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/images/avatar.gif"
               alt="Jessyon" />
          <p class="site-author-name" itemprop="name">Jessyon</p>
          <p class="site-description motion-element" itemprop="description"></p>
        </div>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">21</span>
              <span class="site-state-item-name">日志</span>
            </a>
          </div>

          

          
            <div class="site-state-item site-state-tags">
              <a href="/tags">
                <span class="site-state-item-count">21</span>
                <span class="site-state-item-name">标签</span>
              </a>
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
        </div>

        
        

        
        

      </section>

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2016</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Jessyon</span>
</div>

<div class="powered-by">
  由 <a class="theme-link" href="https://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Muse
  </a>
</div>

        

        
      </div>
    </footer>

    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
    </div>
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  



  
  <script type="text/javascript" src="/vendors/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/vendors/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/vendors/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/vendors/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/vendors/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/vendors/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.0.1"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.0.1"></script>



  
  

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.0.1"></script>



  

  
    
  

  <script type="text/javascript">
    var duoshuoQuery = {short_name:"jessyon"};
    (function() {
      var ds = document.createElement('script');
      ds.type = 'text/javascript';ds.async = true;
      ds.id = 'duoshuo-script';
      ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
      ds.charset = 'UTF-8';
      (document.getElementsByTagName('head')[0]
      || document.getElementsByTagName('body')[0]).appendChild(ds);
    })();
  </script>

  
    
    <script src="/vendors/ua-parser-js/dist/ua-parser.min.js?v=0.7.9"></script>
    <script src="/js/src/hook-duoshuo.js"></script>
  






  
  

  

  

  

</body>
</html>
